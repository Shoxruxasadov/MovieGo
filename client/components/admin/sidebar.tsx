"use client"

import Image from "next/image";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { useTranslation } from "react-i18next";
import { motion } from "framer-motion"
import { useEffect, useMemo } from "react";
import classNames from "classnames";
import { useSidebar, useUser } from "@/store/zustand";
import Cookies from "js-cookie";

export default function Sidebar() {
    const { position, setPosition, opacity, setOpacity, positionLng, setPositionLng } = useSidebar();
    const { user } = useUser();
    const pathname = usePathname()
    const { t, i18n } = useTranslation();
    const languages = ["uz", "ru", "en"]

    const links = [
        {
            name: t("admin.sidebar.dashboard"), link: "/admin",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M21.6359 12.9581L21.3572 14.8955C20.8697 18.2829 20.626 19.9766 19.451 20.9884C18.2759 22.0002 16.5526 22.0002 13.1061 22.0002H10.8939C7.44737 22.0002 5.72409 22.0002 4.54903 20.9884C3.37396 19.9766 3.13025 18.2829 2.64284 14.8955L2.36407 12.9581C1.98463 10.3211 1.79491 9.00253 2.33537 7.87519C2.87583 6.74785 4.02619 6.06258 6.32691 4.69205L7.71175 3.86711C9.80104 2.62253 10.8457 2.00024 12 2.00024C13.1543 2.00024 14.199 2.62253 16.2882 3.86711L17.6731 4.69205C19.9738 6.06258 21.1242 6.74785 21.6646 7.87519" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path fillRule="evenodd" clipRule="evenodd" d="M13.1061 22H10.8939C7.44737 22 5.72409 22 4.54903 20.9882C3.37396 19.9764 3.13025 18.2827 2.64284 14.8952L2.36407 12.9579C1.98463 10.3208 1.79491 9.00229 2.33537 7.87495C2.87583 6.7476 4.02619 6.06234 6.32691 4.69181L7.71175 3.86687C9.80104 2.62229 10.8457 2 12 2C13.1543 2 14.199 2.62229 16.2882 3.86687L17.6731 4.69181C19.9738 6.06234 21.1242 6.7476 21.6646 7.87495C22.2051 9.00229 22.0154 10.3208 21.6359 12.9579L21.3572 14.8952C20.8697 18.2827 20.626 19.9764 19.451 20.9882C18.2759 22 16.5526 22 13.1061 22ZM8.39757 15.5532C8.64423 15.2204 9.11395 15.1506 9.44671 15.3973C10.1751 15.9371 11.0542 16.2498 12.0001 16.2498C12.946 16.2498 13.8251 15.9371 14.5535 15.3973C14.8863 15.1506 15.356 15.2204 15.6026 15.5532C15.8493 15.8859 15.7795 16.3557 15.4467 16.6023C14.4743 17.3231 13.2851 17.7498 12.0001 17.7498C10.7151 17.7498 9.5259 17.3231 8.55349 16.6023C8.22072 16.3557 8.15092 15.8859 8.39757 15.5532Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.users"), link: "/admin/users",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="9" cy="6.00049" r="4" stroke="white" strokeWidth="1.5" />
                <path d="M15 9.00049C16.6569 9.00049 18 7.65734 18 6.00049C18 4.34363 16.6569 3.00049 15 3.00049" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M5.88915 20.5848C6.82627 20.8509 7.88256 21.0005 9 21.0005C12.866 21.0005 16 19.2096 16 17.0005C16 14.7913 12.866 13.0005 9 13.0005C5.13401 13.0005 2 14.7913 2 17.0005C2 17.3458 2.07657 17.6809 2.22053 18.0005" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M18 14.0005C19.7542 14.3852 21 15.3594 21 16.5005C21 17.5298 19.9863 18.4234 18.5 18.8709" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="9.00098" cy="6.00049" r="4" fill="white" />
                <ellipse cx="9.00098" cy="17.0015" rx="7" ry="4" fill="white" />
                <path d="M20.9996 17.0009C20.9996 18.6578 18.9641 20.0009 16.4788 20.0009C17.211 19.2006 17.7145 18.196 17.7145 17.0023C17.7145 15.8073 17.2098 14.8018 16.4762 14.001C18.9615 14.001 20.9996 15.3441 20.9996 17.0009Z" fill="white" />
                <path d="M17.9996 6.00122C17.9996 7.65807 16.6565 9.00122 14.9996 9.00122C14.6383 9.00122 14.292 8.93736 13.9712 8.8203C14.4443 7.98821 14.7145 7.02571 14.7145 6.0001C14.7145 4.97526 14.4447 4.01342 13.9722 3.18175C14.2927 3.06494 14.6387 3.00122 14.9996 3.00122C16.6565 3.00122 17.9996 4.34437 17.9996 6.00122Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.movies"), link: "/admin/movies",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M2.5 7.25C2.08579 7.25 1.75 7.58579 1.75 8C1.75 8.41421 2.08579 8.75 2.5 8.75V7.25ZM22 7.25H2.5V8.75H22V7.25Z" fill="white" />
                <path d="M10.5 2.5L7 8" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M17 2.5L13.5 8" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M15 14.5C15 13.8666 14.338 13.4395 13.014 12.5852C11.6719 11.7193 11.0008 11.2863 10.5004 11.6042C10 11.9221 10 12.7814 10 14.5C10 16.2186 10 17.0779 10.5004 17.3958C11.0008 17.7137 11.6719 17.2807 13.014 16.4148C14.338 15.5605 15 15.1334 15 14.5Z" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 2C13.8452 2 15.3293 2 16.5401 2.08783L13.0986 7.25002H8.40139L11.9014 2H12Z" fill="white" />
                <path d="M3.46447 3.46447C4.71683 2.2121 6.62194 2.03072 10.0957 2.00445L6.59861 7.25002H2.10418C2.25143 5.48593 2.6068 4.32213 3.46447 3.46447Z" fill="white" />
                <path fillRule="evenodd" clipRule="evenodd" d="M2 12C2 10.7633 2 9.68875 2.02644 8.75002H21.9736C22 9.68875 22 10.7633 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12ZM13.014 12.5852C14.338 13.4395 15 13.8666 15 14.5C15 15.1334 14.338 15.5605 13.014 16.4148C11.6719 17.2807 11.0008 17.7137 10.5004 17.3958C10 17.0779 10 16.2186 10 14.5C10 12.7814 10 11.9221 10.5004 11.6042C11.0008 11.2863 11.6719 11.7193 13.014 12.5852Z" fill="white" />
                <path d="M21.8958 7.25002C21.7486 5.48593 21.3932 4.32213 20.5355 3.46447C19.9382 2.86714 19.1924 2.51345 18.1987 2.30403L14.9014 7.25002H21.8958Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.studios"), link: "/admin/studios",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M19.562 7C19.7906 5.69523 18.7866 4.5 17.4619 4.5H6.53812C5.21347 4.5 4.20946 5.69523 4.43809 7" stroke="white" strokeWidth="1.5" />
                <path d="M17.5001 4.5C17.5284 4.24092 17.5426 4.11135 17.5429 4.00435C17.5451 2.98072 16.774 2.12064 15.7563 2.01142C15.6499 2 15.5195 2 15.2589 2H8.74111C8.48047 2 8.35014 2 8.24375 2.01142C7.22596 2.12064 6.45493 2.98072 6.45716 4.00434C6.45739 4.11135 6.47158 4.2409 6.49995 4.5" stroke="white" strokeWidth="1.5" />
                <path d="M13.8876 12.693C14.9625 13.4602 15.5 13.8439 15.5 14.5C15.5 15.1561 14.9625 15.5398 13.8876 16.307C13.5909 16.5189 13.2966 16.7183 13.0261 16.8844C12.7888 17.0302 12.5201 17.181 12.2419 17.3291C11.1695 17.8997 10.6333 18.185 10.1524 17.8691C9.6715 17.5532 9.62779 16.8919 9.54038 15.5694C9.51566 15.1954 9.5 14.8287 9.5 14.5C9.5 14.1713 9.51566 13.8046 9.54038 13.4306C9.62779 12.1081 9.6715 11.4468 10.1524 11.1309C10.6333 10.815 11.1695 11.1003 12.2419 11.6709C12.5201 11.819 12.7888 11.9698 13.0261 12.1156C13.2966 12.2817 13.5909 12.4811 13.8876 12.693Z" stroke="white" strokeWidth="1.5" />
                <path d="M21.0943 13.793L21.0667 14L20.6943 16.793C20.3635 19.2739 20.1981 20.5143 19.3497 21.2572C18.5012 22 17.2498 22 14.7469 22H9.25314C6.75031 22 5.49889 22 4.65042 21.2572C3.80195 20.5143 3.63656 19.2739 3.30578 16.793L2.90578 13.793C2.48397 10.6294 2.27307 9.04765 3.16944 8.02383C4.06582 7 5.66159 7 8.85314 7H15.1469C18.3385 7 19.9343 7 20.8306 8.02383C21.2614 8.51583 21.4365 9.13668 21.4553 10" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M8.8589 2.00001H15.141C15.3502 1.99995 15.5106 1.99991 15.6509 2.01515C16.6479 2.12351 17.464 2.78957 17.81 3.68676H6.18985C6.53591 2.78957 7.35199 2.12351 8.34903 2.01515C8.48926 1.99991 8.64967 1.99995 8.8589 2.00001Z" fill="white" />
                <path d="M6.87946 4.72309C5.6279 4.72309 4.60167 5.56284 4.25919 6.67687C4.25205 6.70009 4.24521 6.72343 4.23866 6.74689C4.597 6.62632 4.96993 6.54755 5.34745 6.49378C6.31978 6.35527 7.54859 6.35534 8.97602 6.35543L9.08261 6.35543L15.1789 6.35543C16.6063 6.35534 17.8351 6.35527 18.8075 6.49378C19.185 6.54755 19.5579 6.62632 19.9163 6.74689C19.9097 6.72343 19.9029 6.70009 19.8957 6.67687C19.5533 5.56284 18.527 4.72309 17.2755 4.72309H6.87946Z" fill="white" />
                <path fillRule="evenodd" clipRule="evenodd" d="M3.59609 8.52881C2.74302 9.51563 2.94373 11.0402 3.34516 14.0894L3.72583 16.981C4.04063 19.3722 4.19803 20.5678 5.0055 21.2838C5.81298 21.9998 7.00393 21.9998 9.38583 21.9998H14.6142C16.9961 21.9998 18.187 21.9998 18.9945 21.2838C19.802 20.5678 19.9594 19.3722 20.2742 16.981L20.6548 14.0894C21.0563 11.0402 21.257 9.51563 20.4039 8.52881C19.5509 7.54199 18.0322 7.54199 14.9948 7.54199H9.00515C5.96782 7.54199 4.44915 7.54199 3.59609 8.52881ZM12.5128 11.3775L12.5655 11.406C12.8385 11.553 13.1079 11.706 13.3502 11.8568C13.6262 12.0285 13.9207 12.2309 14.2111 12.4408L14.2575 12.4744C14.729 12.8151 15.1565 13.1241 15.4567 13.4339C15.798 13.7862 16.0446 14.2086 16.0446 14.7709C16.0446 15.3333 15.798 15.7557 15.4567 16.108C15.1565 16.4178 14.729 16.7267 14.2575 17.0675L14.2111 17.101C13.9207 17.311 13.6262 17.5133 13.3502 17.6851C13.1079 17.8359 12.8385 17.9888 12.5655 18.1359L12.5128 18.1643C12.0483 18.4148 11.6153 18.6482 11.2389 18.768C10.8015 18.9073 10.3173 18.9334 9.84983 18.6225C9.4025 18.3249 9.21137 17.8793 9.11315 17.4301C9.02324 17.0189 8.98904 16.4942 8.95048 15.9024L8.94702 15.8493C8.92287 15.4793 8.90704 15.1089 8.90704 14.7709C8.90704 14.4329 8.92287 14.0626 8.94702 13.6925L8.95048 13.6395C8.98904 13.0477 9.02324 12.5229 9.11315 12.1117C9.21137 11.6626 9.4025 11.217 9.84983 10.9194C10.3173 10.6084 10.8015 10.6346 11.2389 10.7738C11.6153 10.8936 12.0483 11.1271 12.5128 11.3775ZM10.6335 12.1278C10.6462 12.1194 10.648 12.1204 10.648 12.1204C10.6595 12.1197 10.7061 12.1197 10.8108 12.1531C11.0449 12.2276 11.3588 12.3934 11.895 12.6823C12.1516 12.8206 12.3936 12.9583 12.6029 13.0886C12.8416 13.2372 13.1073 13.4192 13.3817 13.6176C13.9149 14.003 14.2364 14.2387 14.4378 14.4466C14.608 14.6222 14.6171 14.7009 14.6171 14.7709C14.6171 14.841 14.608 14.9197 14.4378 15.0953C14.2364 15.3032 13.9149 15.5388 13.3817 15.9243C13.1073 16.1226 12.8416 16.3047 12.6029 16.4533C12.3936 16.5835 12.1516 16.7213 11.895 16.8596C11.3588 17.1485 11.0449 17.3143 10.8108 17.3888C10.7061 17.4221 10.6595 17.4222 10.648 17.4214C10.648 17.4214 10.6462 17.4225 10.6335 17.414L10.6319 17.413C10.618 17.4044 10.5621 17.37 10.5069 17.1175C10.4435 16.8274 10.4146 16.4153 10.3714 15.754C10.3485 15.403 10.3346 15.0666 10.3346 14.7709C10.3346 14.4753 10.3485 14.1388 10.3714 13.7879C10.4146 13.1266 10.4435 12.7144 10.5069 12.4243C10.5621 12.1719 10.618 12.1374 10.6319 12.1289L10.6335 12.1278Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.genres"), link: "/admin/genres",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M8.9126 15.9331C10.1709 16.2485 11.5985 16.2487 13.0351 15.8638C14.4717 15.4788 15.7079 14.7649 16.64 13.8626" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <ellipse cx="14.5094" cy="9.77454" rx="1" ry="1.5" transform="rotate(-15 14.5094 9.77454)" fill="white" />
                <ellipse cx="8.71402" cy="11.3278" rx="1" ry="1.5" transform="rotate(-15 8.71402 11.3278)" fill="white" />
                <path d="M20.7964 9.643C21.9075 13.7897 22.4631 15.863 21.5201 17.4964C20.577 19.1298 18.5037 19.6853 14.357 20.7964C10.2103 21.9075 8.13698 22.4631 6.50359 21.5201C4.87021 20.577 4.31466 18.5037 3.20356 14.357C2.09246 10.2103 1.53691 8.13698 2.47995 6.50359C3.42298 4.87021 5.49632 4.31466 9.643 3.20356C13.7897 2.09246 15.863 1.53691 17.4964 2.47995C18.5048 3.06212 19.1023 4.07505 19.6734 5.74061" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M13 15.9999L13.478 16.9737C13.8393 17.7099 14.7249 18.0193 15.4661 17.6685C16.2223 17.3105 16.5394 16.403 16.1708 15.6519L15.7115 14.7163" stroke="white" strokeWidth="1.5" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path fillRule="evenodd" clipRule="evenodd" d="M2.47995 6.50359C1.53691 8.13698 2.09246 10.2103 3.20356 14.357C4.31466 18.5037 4.87021 20.577 6.50359 21.5201C8.13698 22.4631 10.2103 21.9075 14.357 20.7964C18.5037 19.6853 20.577 19.1298 21.5201 17.4964C22.4631 15.863 21.9075 13.7897 20.7964 9.643C19.6853 5.49632 19.1298 3.42298 17.4964 2.47995C15.863 1.53691 13.7897 2.09246 9.643 3.20356C5.49632 4.31466 3.42298 4.87021 2.47995 6.50359ZM8.18526 15.7507C8.28596 15.3489 8.69331 15.1049 9.09509 15.2056C10.2254 15.4889 11.5234 15.4924 12.8412 15.1393C14.1589 14.7862 15.2813 14.1341 16.1185 13.3236C16.4161 13.0355 16.8909 13.0432 17.179 13.3408C17.4671 13.6384 17.4594 14.1133 17.1618 14.4014C16.8143 14.7378 16.4298 15.0492 16.0128 15.3302L16.1708 15.6519C16.5395 16.403 16.2223 17.3105 15.4661 17.6684C14.7249 18.0193 13.8393 17.7099 13.478 16.9737L13.2818 16.574L13.2294 16.5881C11.674 17.0049 10.1168 17.008 8.73041 16.6606C8.32863 16.5598 8.08455 16.1525 8.18526 15.7507ZM15.4755 9.51583C15.6899 10.316 15.4312 11.0806 14.8978 11.2235C14.3643 11.3665 13.758 10.8337 13.5436 10.0335C13.3292 9.23327 13.5879 8.46871 14.1213 8.32577C14.6548 8.18282 15.2611 8.71564 15.4755 9.51583ZM9.10222 12.7765C9.63569 12.6335 9.89433 11.8689 9.67992 11.0687C9.46551 10.2685 8.85923 9.73574 8.32577 9.87868C7.7923 10.0216 7.53366 10.7862 7.74807 11.5864C7.96248 12.3866 8.56876 12.9194 9.10222 12.7765Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.categories"), link: "/admin/categories",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M2.55078 4.5C2.61472 3.84994 2.75923 3.41238 3.08582 3.08579C3.67161 2.5 4.61442 2.5 6.50004 2.5C8.38565 2.5 9.32846 2.5 9.91425 3.08579C10.5 3.67157 10.5 4.61438 10.5 6.5C10.5 8.38562 10.5 9.32843 9.91425 9.91421C9.32846 10.5 8.38565 10.5 6.50004 10.5C4.61442 10.5 3.67161 10.5 3.08582 9.91421C2.77645 9.60484 2.63047 9.19589 2.56158 8.60106" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M21.4493 15.5C21.3853 14.8499 21.2408 14.4124 20.9142 14.0858C20.3284 13.5 19.3856 13.5 17.5 13.5C15.6144 13.5 14.6716 13.5 14.0858 14.0858C13.5 14.6716 13.5 15.6144 13.5 17.5C13.5 19.3856 13.5 20.3284 14.0858 20.9142C14.6716 21.5 15.6144 21.5 17.5 21.5C19.3856 21.5 20.3284 21.5 20.9142 20.9142C21.2408 20.5876 21.3853 20.1501 21.4493 19.5" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M2.5 17.5C2.5 15.6144 2.5 14.6716 3.08579 14.0858C3.67157 13.5 4.61438 13.5 6.5 13.5C8.38562 13.5 9.32843 13.5 9.91421 14.0858C10.5 14.6716 10.5 15.6144 10.5 17.5C10.5 19.3856 10.5 20.3284 9.91421 20.9142C9.32843 21.5 8.38562 21.5 6.5 21.5C4.61438 21.5 3.67157 21.5 3.08579 20.9142C2.5 20.3284 2.5 19.3856 2.5 17.5Z" stroke="white" strokeWidth="1.5" />
                <path d="M13.5 6.5C13.5 4.61438 13.5 3.67157 14.0858 3.08579C14.6716 2.5 15.6144 2.5 17.5 2.5C19.3856 2.5 20.3284 2.5 20.9142 3.08579C21.5 3.67157 21.5 4.61438 21.5 6.5C21.5 8.38562 21.5 9.32843 20.9142 9.91421C20.3284 10.5 19.3856 10.5 17.5 10.5C15.6144 10.5 14.6716 10.5 14.0858 9.91421C13.5 9.32843 13.5 8.38562 13.5 6.5Z" stroke="white" strokeWidth="1.5" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M2 6.5C2 4.37868 2 3.31802 2.65901 2.65901C3.31802 2 4.37868 2 6.5 2C8.62132 2 9.68198 2 10.341 2.65901C11 3.31802 11 4.37868 11 6.5C11 8.62132 11 9.68198 10.341 10.341C9.68198 11 8.62132 11 6.5 11C4.37868 11 3.31802 11 2.65901 10.341C2 9.68198 2 8.62132 2 6.5Z" fill="white" />
                <path d="M13 17.5C13 15.3787 13 14.318 13.659 13.659C14.318 13 15.3787 13 17.5 13C19.6213 13 20.682 13 21.341 13.659C22 14.318 22 15.3787 22 17.5C22 19.6213 22 20.682 21.341 21.341C20.682 22 19.6213 22 17.5 22C15.3787 22 14.318 22 13.659 21.341C13 20.682 13 19.6213 13 17.5Z" fill="white" />
                <path d="M2 17.5C2 15.3787 2 14.318 2.65901 13.659C3.31802 13 4.37868 13 6.5 13C8.62132 13 9.68198 13 10.341 13.659C11 14.318 11 15.3787 11 17.5C11 19.6213 11 20.682 10.341 21.341C9.68198 22 8.62132 22 6.5 22C4.37868 22 3.31802 22 2.65901 21.341C2 20.682 2 19.6213 2 17.5Z" fill="white" />
                <path d="M13 6.5C13 4.37868 13 3.31802 13.659 2.65901C14.318 2 15.3787 2 17.5 2C19.6213 2 20.682 2 21.341 2.65901C22 3.31802 22 4.37868 22 6.5C22 8.62132 22 9.68198 21.341 10.341C20.682 11 19.6213 11 17.5 11C15.3787 11 14.318 11 13.659 10.341C13 9.68198 13 8.62132 13 6.5Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.payments"), link: "/admin/payments",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M6 10.0005H10" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                <path d="M21.9977 12.5005C21.9977 12.4231 22 11.9678 21.9977 11.9351C21.9623 11.4343 21.5328 11.0355 20.9935 11.0026C20.9583 11.0005 20.9167 11.0005 20.8333 11.0005H18.2308C16.4465 11.0005 15 12.3436 15 14.0005C15 15.6573 16.4465 17.0005 18.2308 17.0005H20.8333C20.9167 17.0005 20.9583 17.0005 20.9935 16.9983C21.5328 16.9655 21.9623 16.5666 21.9977 16.0659C22 16.0332 22 15.5779 22 15.5005" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <circle cx="18" cy="14.0005" r="1" fill="white" />
                <path d="M10 22.0005H13C16.7712 22.0005 18.6569 22.0005 19.8284 20.8289C20.6366 20.0207 20.8873 18.8728 20.965 17.0005M20.965 11.0005C20.8873 9.12819 20.6366 7.98023 19.8284 7.17206C18.6569 6.00049 16.7712 6.00049 13 6.00049H10C6.22876 6.00049 4.34315 6.00049 3.17157 7.17206C2 8.34363 2 10.2293 2 14.0005C2 17.7717 2 19.6573 3.17157 20.8289C3.82475 21.4821 4.69989 21.7711 6 21.899" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M6 6.00049L9.73549 3.52362C10.7874 2.82611 12.2126 2.82611 13.2645 3.52362L17 6.00049" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path fillRule="evenodd" clipRule="evenodd" d="M20.4105 9.86106C20.3559 9.85759 20.2964 9.85761 20.2348 9.85764L20.2194 9.85764H17.8015C15.8086 9.85764 14.1033 11.4387 14.1033 13.5005C14.1033 15.5623 15.8086 17.1434 17.8015 17.1434H20.2194L20.2348 17.1434C20.2964 17.1434 20.3559 17.1434 20.4105 17.1399C21.22 17.0884 21.9359 16.45 21.9961 15.5582C22.0001 15.4997 22 15.4367 22 15.3783L22 15.3624V11.6386L22 11.6227C22 11.5643 22.0001 11.5013 21.9961 11.4428C21.9359 10.551 21.22 9.91258 20.4105 9.86106ZM17.5872 14.4719C18.1002 14.4719 18.5162 14.037 18.5162 13.5005C18.5162 12.964 18.1002 12.5291 17.5872 12.5291C17.0741 12.5291 16.6581 12.964 16.6581 13.5005C16.6581 14.037 17.0741 14.4719 17.5872 14.4719Z" fill="white" />
                <path fillRule="evenodd" clipRule="evenodd" d="M20.2341 18.6005C20.3778 18.5967 20.4866 18.7309 20.4476 18.8703C20.2541 19.5624 19.947 20.1523 19.4542 20.649C18.7329 21.376 17.8183 21.6986 16.6882 21.8517C15.5902 22.0005 14.1872 22.0005 12.4158 22.0005H10.3794C8.60803 22.0005 7.20501 22.0005 6.10697 21.8517C4.97692 21.6986 4.06227 21.376 3.34096 20.649C2.61964 19.922 2.29953 19.0002 2.1476 17.8613C1.99997 16.7546 1.99999 15.3405 2 13.5553V13.4457C1.99998 11.6604 1.99997 10.2464 2.1476 9.13972C2.29953 8.0008 2.61964 7.07896 3.34096 6.35198C4.06227 5.625 4.97692 5.30237 6.10697 5.14925C7.205 5.00046 8.60802 5.00047 10.3794 5.00049L12.4158 5.00049C14.1872 5.00047 15.5902 5.00046 16.6882 5.14925C17.8183 5.30237 18.7329 5.625 19.4542 6.35198C19.947 6.84865 20.2541 7.43853 20.4476 8.13061C20.4866 8.27008 20.3778 8.40425 20.2341 8.40049L17.8015 8.4005C15.0673 8.4005 12.6575 10.5774 12.6575 13.5005C12.6575 16.4236 15.0673 18.6005 17.8015 18.6005L20.2341 18.6005ZM5.61446 8.8862C5.21522 8.8862 4.89157 9.2124 4.89157 9.61477C4.89157 10.0172 5.21522 10.3433 5.61446 10.3433H9.46988C9.86912 10.3433 10.1928 10.0172 10.1928 9.61477C10.1928 9.2124 9.86912 8.8862 9.46988 8.8862H5.61446Z" fill="white" />
                <path d="M7.77668 4.02487L9.73549 2.58175C10.7874 1.80673 12.2126 1.80674 13.2645 2.58175L15.2336 4.03246C14.4103 4.00044 13.4909 4.00047 12.4829 4.00049H10.3123C9.39123 4.00047 8.5441 4.00045 7.77668 4.02487Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.reviews"), link: "/admin/reviews",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M8 10.5002H16" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M8 14.0002H13.5" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M17 3.33807C15.5291 2.48722 13.8214 2.00024 12 2.00024C6.47715 2.00024 2 6.4774 2 12.0002C2 13.5999 2.37562 15.1119 3.04346 16.4527C3.22094 16.809 3.28001 17.2163 3.17712 17.6009L2.58151 19.8269C2.32295 20.7932 3.20701 21.6773 4.17335 21.4187L6.39939 20.8231C6.78393 20.7202 7.19121 20.7793 7.54753 20.9568C8.88837 21.6246 10.4003 22.0002 12 22.0002C17.5228 22.0002 22 17.5231 22 12.0002C22 10.1788 21.513 8.47111 20.6622 7.00024" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path fillRule="evenodd" clipRule="evenodd" d="M12 22.0002C17.5228 22.0002 22 17.5231 22 12.0002C22 6.4774 17.5228 2.00024 12 2.00024C6.47715 2.00024 2 6.4774 2 12.0002C2 13.5999 2.37562 15.1119 3.04346 16.4527C3.22094 16.809 3.28001 17.2163 3.17712 17.6009L2.58151 19.8269C2.32295 20.7932 3.20701 21.6773 4.17335 21.4187L6.39939 20.8231C6.78393 20.7202 7.19121 20.7793 7.54753 20.9568C8.88837 21.6246 10.4003 22.0002 12 22.0002ZM8 13.2502C7.58579 13.2502 7.25 13.586 7.25 14.0002C7.25 14.4145 7.58579 14.7502 8 14.7502H13.5C13.9142 14.7502 14.25 14.4145 14.25 14.0002C14.25 13.586 13.9142 13.2502 13.5 13.2502H8ZM7.25 10.5002C7.25 10.086 7.58579 9.75024 8 9.75024H16C16.4142 9.75024 16.75 10.086 16.75 10.5002C16.75 10.9145 16.4142 11.2502 16 11.2502H8C7.58579 11.2502 7.25 10.9145 7.25 10.5002Z" fill="white" />
            </svg>
        },
        {
            name: t("admin.sidebar.cast"), link: "/admin/cast",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M4.0014 10.9997C3.51761 9.19412 3.27572 8.29135 3.48377 7.51489C3.62006 7.00622 3.88785 6.5424 4.26022 6.17003C4.82863 5.60162 5.7314 5.35973 7.53694 4.87593L14.5399 2.99949C15.2131 2.8191 15.5498 2.72891 15.8446 2.70958C17.0554 2.63022 18.1948 3.28804 18.7314 4.37629C18.8621 4.64129 18.9523 4.97791 19.1327 5.65114C19.1928 5.87556 19.2229 5.98776 19.2293 6.08604C19.2558 6.48964 19.0365 6.86943 18.6738 7.04832C18.5854 7.09188 18.4732 7.12195 18.2488 7.18208L4.0014 10.9997Z" stroke="white" strokeWidth="1.5" />
                <path d="M14.7004 2.94159L14.0627 8.28886" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M8.42196 4.62372L7.78421 9.97099" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M14 16.5C14 16.0778 13.6028 15.793 12.8084 15.2235C12.0031 14.6462 11.6005 14.3575 11.3002 14.5695C11 14.7814 11 15.3543 11 16.5C11 17.6457 11 18.2186 11.3002 18.4305C11.6005 18.6425 12.0031 18.3538 12.8084 17.7765C13.6028 17.207 14 16.9222 14 16.5Z" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M20 16C20 18.8284 20 20.2426 19.1213 21.1213C18.2426 22 16.8284 22 14 22H10C7.17157 22 5.75736 22 4.87868 21.1213C4 20.2426 4 18.8284 4 16V11H16C17.8856 11 18.8284 11 19.4142 11.5858C19.7501 11.9217 19.8934 12.3749 19.9545 13.0559" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            </svg>,
            active: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M14.8412 8.09511L18.2487 7.18208C18.4731 7.12195 18.5853 7.09188 18.6736 7.04832C19.0364 6.86943 19.2557 6.48964 19.2292 6.08604C19.2228 5.98776 19.1927 5.87556 19.1326 5.65114C18.9522 4.97791 18.862 4.64129 18.7313 4.37629C18.1946 3.28804 17.0553 2.63022 15.8445 2.70958C15.7213 2.71766 15.5907 2.73811 15.4314 2.77235C15.4505 2.85465 15.4558 2.94159 15.4452 3.0303L14.8412 8.09511Z" fill="white" />
                <path d="M9.15025 4.44361L13.9184 3.16598L13.318 8.19993C13.3058 8.30276 13.3149 8.40322 13.342 8.49682L8.56266 9.77744L9.16673 4.71262C9.17779 4.61993 9.17143 4.52917 9.15025 4.44361Z" fill="white" />
                <path fillRule="evenodd" clipRule="evenodd" d="M16 11H4V16C4 18.8284 4 20.2426 4.87868 21.1213C5.75736 22 7.17157 22 10 22H14C16.8284 22 18.2426 22 19.1213 21.1213C20 20.2426 20 18.8284 20 16V15C20 13.1144 20 12.1716 19.4142 11.5858C18.8284 11 17.8856 11 16 11ZM12.8084 15.2235C13.6028 15.793 14 16.0778 14 16.5C14 16.9222 13.6028 17.207 12.8084 17.7765C12.0031 18.3538 11.6005 18.6425 11.3002 18.4305C11 18.2186 11 17.6457 11 16.5C11 15.3543 11 14.7814 11.3002 14.5695C11.6005 14.3575 12.0031 14.6462 12.8084 15.2235Z" fill="white" />
                <path d="M7.03953 9.88225C7.02727 9.98509 7.03643 10.0855 7.06349 10.1791L4.00128 10.9997C3.51749 9.19412 3.27559 8.29135 3.48364 7.51489C3.61994 7.00623 3.88773 6.5424 4.2601 6.17003C4.82851 5.60162 5.73128 5.35973 7.53682 4.87593L7.63992 4.84831L7.03953 9.88225Z" fill="white" />
            </svg>
        },
    ];

    const handleLanguage = (locale: string) => {
        i18n.changeLanguage(locale);
        Cookies.set("language", locale, { expires: 365 });
    }

    const getLanguageName = (lng: string) => {
        if (lng === "ru") return "ру"
        return lng
    }

    useEffect(() => {
        const index = links.findIndex((item) => item.link === pathname);
        if (index !== -1) setPosition(index * 48);
        setOpacity(index !== -1 ? 1 : 0);
    }, [pathname]);

    useEffect(() => {
        const index = languages.findIndex((item) => item === i18n.language);
        if (index !== -1) setPositionLng((index * 60.48) + (index * 4) + 4);
    }, [i18n.language]);

    return <nav id="sidebar">
        <div id="wrapper">
            <Link href="/admin" className="logo">
                <Image src='/logo/logo.png' width={256} height={256} alt="MovieGo Logo" />
                <h1>MovieGo</h1>
            </Link>
            <ul>
                {links.map((section, i) => (
                    <li key={i}><Link href={section.link} className={classNames({ active: pathname == section.link })}>
                        <div className="icon">{pathname == section.link ? section.active : section.icon}</div>
                        <span>{section.name}</span>
                    </Link></li>
                ))}
                <motion.li initial={{ top: position, opacity: opacity }} animate={{ top: position, opacity: opacity }} className="interactive" />
            </ul>
        </div>
        <div id="account">
            <ul className="language">
                {languages.map((lng, i) => (
                    <li key={i} className={classNames("lng", { active: i18n.language == lng })} onClick={() => handleLanguage(lng)}>
                        <span>{getLanguageName(lng)}</span>
                    </li>
                ))}
                <motion.li initial={{ left: positionLng }} animate={{ left: positionLng }} className="interactive" />
            </ul>
            <Link href="/" className="back">
                <Image src={user ? user.image : '/sign/user.webp'} width={256} height={256} alt="avatar" />
                <div className="name">
                    <h3>{user && user.name}</h3>
                    <p>{user && user.email}</p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M15 12L2 12M2 12L5.5 9M2 12L5.5 15" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M9.00195 7C9.01406 4.82497 9.11051 3.64706 9.87889 2.87868C10.7576 2 12.1718 2 15.0002 2L16.0002 2C18.8286 2 20.2429 2 21.1215 2.87868C22.0002 3.75736 22.0002 5.17157 22.0002 8L22.0002 16C22.0002 18.8284 22.0002 20.2426 21.1215 21.1213C20.3531 21.8897 19.1752 21.9862 17 21.9983M9.00195 17C9.01406 19.175 9.11051 20.3529 9.87889 21.1213C10.5202 21.7626 11.4467 21.9359 13 21.9827" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
                </svg>
            </Link>
        </div>
    </nav>
}
